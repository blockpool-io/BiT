<!DOCTYPE HTML>
<!--
	Typify by TEMPLATED
	templated.co @templatedco
	Released for free under the Creative Commons Attribution 3.0 license (templated.co/license)
-->
<html>
	<head>
		<title>Associate a new or existing BiT account with your system</title>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		<!--[if lte IE 8]><script src="../assets/js/ie/html5shiv.js"></script><![endif]-->
		<link rel="stylesheet" href="../assets/css/main.css" />
		<!--[if lte IE 9]><link rel="stylesheet" href="../assets/css/ie9.css" /><![endif]-->
	</head>
	<body>

		<!-- Banner -->
			<section id="banner">
				<h2><strong>Associate</strong> a new or existing BiT account with your system</h2>
				<p>Brought to you by Blockpool</p>
				<ul class="actions">
					<li><a href="#demo" class="button special">Working Demo</a></li>
					<li><a href="#code" class="button special">Sample Code</a></li>
				</ul>
            </section>

		<!-- Two -->
			<section id="demo" class="wrapper style2 special">
				<div class="inner narrow">
					<header>
						<h2>Associate Account</h2>
					</header>
					<form class="grid-form" method="post" action="/associate">
						<div class="form-control narrow">
							<label for="email">Email</label>
							<input name="email" id="email" type="email">
						</div>
						<div class="form-control narrow">
							<label for="password">Password</label>
							<input name="password" id="password" type="password">
						</div>
						<ul class="actions">
							<li><input value="Associate Account" type="submit"></li>
						</ul>
					</form>
				</div>
			</section>

		<!-- Three -->
		
			<section id="code" class="wrapper">
				<div class="inner">

					<h2 id="content">Associate Account - sample code</h2>
					<p>
                        Simply decorate your request with the correct headers (apipublickey and apihashedkey) and pass over the email address and password
                        you have collected
                    </p>
                    <pre>
                        <code>
router.post('/', (req, res) => {
    let email = req.body.email;
    let password = req.body.password;
    if (!email || !password) {
        return res.status(400).json({
            success : false,
            message : "missing required fields"
        });
    }

    addBitHeaders.hashKey(config.apiprivatekey)
    .then((apihashedkey) => {
        let params = {
            url : config.urlToBit + '/organisations/users',
            headers : {
                apipublickey : config.apipublickey,
                apihashedkey : apihashedkey
            },
            json : true,
            body : req.body
        };
    
        request.post(params, (error, response, body) => {
            if (error) {
                return res.status(response.statusCode).json({
                    success : false,
                    message: error,message
                });
            } else {
                return res.status(response.statusCode).json(body);
            }
        });
    })
    .catch((err) => {
        return res.status(401).json({
            success : false,
            message: err.message
        });
    });
});
                        </code>
                    </pre>
                    
    			</div>
			</section>
		

		<!-- Footer -->
        <footer id="footer">
            <div class="copyright">
                &copy; Blockpool Samples. Design: <a href="http://templated.co/">TEMPLATED</a>.
            </div>
        </footer>

		<!-- Scripts -->
			<script src="../assets/js/jquery.min.js"></script>
			<script src="../assets/js/skel.min.js"></script>
			<script src="../assets/js/util.js"></script>
			<!--[if lte IE 8]><script src="../assets/js/ie/respond.min.js"></script><![endif]-->
			<script src="../assets/js/main.js"></script>

	</body>
</html>